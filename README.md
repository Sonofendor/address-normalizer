# Стандартизация адреса
## Введение
Данная задача решалась для того чтобы связать таблицы с данными из разных источников. Например, если есть таблица с информацией о юр. лицах на сайте госзакупок и отдельно таблица с пользователями hh.ru, но нет полей (ИНН, скажем) которые однозначно говорят о том, что перед нами одна и та же компания. Поэтому пользователи сравниваются по нескольким полям вроде названия, телефона и, причина почему мы здесь, адреса. Но сравнивать адрес просто по Fuzzy distance бесполезно, потому что между улицей «1 Тверской-Ямской» и «3 Тверской-Ямской» всего 1 замена, а между ул. «Ак. Волгина» и ул. «Академика Волгина» — 7. А уж между «Россия, Москва, ул. Академика Волгина, 8» и «Ак. Волгина, 8». И тут уже ничего не поделаешь, этот метод просто абсолютно не подойдёт.
Правда, сразу сделаем отступление: если сравнивать эти адреса с неким эталоном, то результат будет на порядок лучше, но об этом позже.
## Текущий вариант
Я пропущу те вариации, которые привели к этому решению, их суть заключается в том, что без знания абсолютно всех адресов хотя бы в России, эта система не будет давать хороших результатов.
## Требования для реализации
1.	50Гб дискового пространства
2.	Python 3 + библиотеки pandas, simpledbf и elasticsearch
3.	Elasticsearch 5.4 + Kibana 5(опционально)
4.	Полная БД ФИАС в формате dbf (https://fias.nalog.ru/Updates.aspx )
## Алгоритм сборки
Для начала надо загрузить весь ФИАС в elastic. Для этого надо запустить «FIAS to elastic.ipynb» и по порядку всё выполнить. Загрузка полнотекстовых адресов занимает около 7 часов. Загрузка всех домов ещё 9.
После этого можно пользоваться ensemble.py. Главный метод там — standardize(string), который как раз и находит адрес в ФИАС и возвращает его стандартизованный вид.

